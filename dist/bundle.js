(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var n,r,o,a,c,l,i,u,s,d,m,v,f,p,h,y,g,b,E,S,L,q;S=document.querySelector("#timer-hours"),L=document.querySelector("#timer-minutes"),q=document.querySelector("#timer-seconds"),function e(){var t,n,r,o=(t=(new Date("11 march 2021").getTime()-(new Date).getTime())/1e3,n=Math.floor(t%60),r=Math.floor(t/60)%60,{timeRemaining:t,hours:Math.floor(t/60/60)%24,minutes:r,seconds:n});S.textContent=o.hours<10?"0"+o.hours:o.hours,L.textContent=o.minutes<10?"0"+o.minutes:o.minutes,q.textContent=o.seconds<10?"0"+o.seconds:o.seconds,o.timeRemaining>0?setTimeout(e,1e3):o.timeRemaining<=0&&(S.textContent="00",L.textContent="00",q.textContent="00")}(),E=document.querySelector("menu"),window.addEventListener("click",(function(e){var t=e.target;E.classList.contains("active-menu")?(t.closest("a")||t.closest("main"))&&E.classList.toggle("active-menu"):E.classList.contains("active-menu")||t.closest(".menu")&&E.classList.toggle("active-menu")})),function(){var t=document.querySelector('a[href="#service-block"]'),n=document.querySelectorAll("menu > ul > li > a"),r=function(e){e.preventDefault();var n=e.target;n.closest("main")&&(n=t);var r=n.getAttribute("href"),o=window.pageYOffset,a=document.querySelector(r).getBoundingClientRect().top,c=null;requestAnimationFrame((function e(t){null===c&&(c=t);var n=t-c,l=a<0?Math.max(o-n/1,o+a):Math.min(o+n/1,o+a);window.scrollTo(0,l),l!==o+a?requestAnimationFrame(e):location.hash=r}))};t.addEventListener("click",r);var o,a=function(t,n){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,i=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var e=r.next();return l=e.done,e},e:function(e){i=!0,c=e},f:function(){try{l||null==r.return||r.return()}finally{if(i)throw c}}}}(n);try{for(a.s();!(o=a.n()).done;)o.value.addEventListener("click",r)}catch(e){a.e(e)}finally{a.f()}}(),y=document.querySelector(".popup"),g=document.querySelectorAll(".popup-btn"),b=document.querySelector(".popup-content"),g.forEach((function(e){return e.addEventListener("click",(function(){if(y.style.display="block",document.documentElement.clientWidth>768)var e=Date.now(),t=setInterval((function(){var n=Date.now()-e;n>=1010?clearInterval(t):function(e){b.style.top=e/10+"px"}(n)}),20)}))})),y.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?y.style.display="none":(t=t.closest(".popup-content"))||(y.style.display="none")})),f=document.querySelector(".service-header"),p=f.querySelectorAll(".service-header-tab"),(h=document.querySelectorAll(".service-tab"))[1].classList.add("d-none"),h[2].classList.add("d-none"),f.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&p.forEach((function(e,n){e===t&&function(e){for(var t=0;t<p.length;t++)e===t?(p[t].classList.add("active"),h[t].classList.remove("d-none")):(h[t].classList.add("d-none"),p[t].classList.remove("active"))}(n)}))})),a=document.querySelectorAll(".portfolio-item"),c=document.querySelector(".portfolio-dots"),l=document.querySelector(".portfolio-content"),i=0,u=function(e,t,n){e[t].classList.remove(n)},s=function(e,t,n){e[t].classList.add(n)},d=function(e){var t=document.createElement("li");t.classList.add("dot"),t.classList.add("dot-active"),c.append(t);for(var n=1;n<e;n++)(t=document.createElement("li")).classList.add("dot"),c.append(t);return document.querySelectorAll(".dot")}(a.length),m=function(){u(a,i,"portfolio-item-active"),u(d,i,"dot-active"),++i>=a.length&&(i=0),s(a,i,"portfolio-item-active"),s(d,i,"dot-active")},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;o=setInterval(m,e)},l.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".portfolio-btn, .dot")&&(u(a,i,"portfolio-item-active"),u(d,i,"dot-active"),t.matches("#arrow-right")?i++:t.matches("#arrow-left")?i--:t.matches(".dot")&&d.forEach((function(e,n){e===t&&(i=n)})),i>=a.length&&(i=0),i<0&&(i=a.length-1),s(a,i,"portfolio-item-active"),s(d,i,"dot-active"))})),l.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),l.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&v(1500)})),v(1500),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),o=document.querySelector(".calc-count"),a=document.querySelector(".calc-day"),c=document.getElementById("total"),l=function(e){var t=e.target;t.matches("input")&&(t.value=t.value.replace(/\D/,""))},i=function(){var t=n.options[n.selectedIndex].value,l=+r.value,i=0,u=1,s=1,d=+c.textContent;o.value>1&&(u+=(o.value-1)/10),a.value&&a.value<5?s*=2:a.value&&a.value<10&&(s*=1.5),t&&l&&(i=e*t*l*u*s);var m=parseInt(i),v=0;d>m?v=setInterval((function(){d===m?(c.textContent=m,clearInterval(v)):(d-=100,c.textContent=d)}),10):d<m&&(v=setInterval((function(){d===m?(c.textContent=m,clearInterval(v)):(d+=100,c.textContent=d)}),10))};t.addEventListener("input",l),t.addEventListener("change",(function(e){var t=e.target;(t.matches("select")||t.matches("input"))&&i()}))}(100),(r=document.querySelector(".command")).addEventListener("mouseover",(function(e){e.target.matches(".command__photo")&&(n=e.target.src,e.target.src=e.target.dataset.img)})),r.addEventListener("mouseout",(function(e){e.target.matches(".command__photo")&&(e.target.src=n)})),function(){var e=document.getElementById("form1"),t=document.getElementById("form2"),n=document.getElementById("form3"),r=document.querySelectorAll(".form-email");document.querySelectorAll(".form-btn"),r.forEach((function(e){e.setAttribute("required","required")}));var o,a=function(e){var t=e.target;t.matches('input[placeholder="Ваше имя"]')?t.value=t.value.replace(/[^А-Яа-я ]/g,""):t.matches('input[placeholder="Ваше сообщение"]')?t.value=t.value.replace(/[^А-Яа-я,\.\?!^0-9 ]/g,""):t.matches('input[placeholder="E-mail"]')||t.matches('input[placeholder="Ваш E-mail"]')?(t.setAttribute("required","required"),t.value=t.value.replace(/[^A-Za-z\-@_'`!\.\* ]/g,"")):(t.matches('input[placeholder="Номер телефона"]')||t.matches('input[placeholder="Ваш номер телефона"]'))&&(t.value=t.value.replace(/[^0-9\+]/g,""))},c=function(e){var t=e.target;t.value=t.value.replace(/ +/g," ").trim(),t.value=t.value.replace(/-+/g,"-"),t.value=t.value.replace(/^-*/g,""),t.value=t.value.replace(/-*$/g,""),t.matches('input[placeholder="Ваше имя"]')&&(t.value.length<2?(l(t),t.closest("form").querySelector(".form-btn").setAttribute("disabled","disabled")):(i(t),t.closest("form").querySelector(".form-btn").removeAttribute("disabled"),t.value=t.value[0].toUpperCase()+t.value.substr(1).toLowerCase())),(t.matches('input[placeholder="Номер телефона"]')||t.matches('input[placeholder="Ваш номер телефона"]'))&&("+"!==t.value[0]&&7===t.value.length||"+"!==t.value[0]&&11===t.value.length||"+"===t.value[0]&&12===t.value.length?(i(t),t.closest("form").querySelector(".form-btn").removeAttribute("disabled")):(l(t),t.closest("form").querySelector(".form-btn").setAttribute("disabled","disabled")))},l=function(e){if(e.classList.remove("success"),e.classList.add("error"),!e.nextElementSibling||!e.nextElementSibling.classList.contains("validator-error")){var t=document.createElement("div");e.matches('input[placeholder="Ваше имя"]')?t.textContent="Имя должно состоять минимум из 2 символов":(e.matches('input[placeholder="Номер телефона"]')||e.matches('input[placeholder="Ваш номер телефона"]'))&&(t.textContent="Это не номер телефона"),t.classList.add("validator-error"),e.insertAdjacentElement("afterend",t)}},i=function(e){e.classList.remove("error"),e.classList.add("success"),e.nextElementSibling&&e.nextElementSibling.classList.contains("validator-error")&&e.nextElementSibling.remove()};(o=document.createElement("style")).textContent="\n        input.success {\n          border: 2px solid green !important;\n        }\n        input.error {\n          border: 2px solid red  !important;\n        }\n\n        .validator-error {\n          font-size: 12px;\n          font-family: sans-serif;\n          color: red;\n        }\n        ",document.head.appendChild(o),e.addEventListener("input",a),e.addEventListener("focusout",c),t.addEventListener("input",a),t.addEventListener("focusout",c),n.addEventListener("input",a),n.addEventListener("focusout",c)}(),function(){var e=document.getElementById("form1"),n=document.getElementById("form2"),r=document.getElementById("form3"),o=document.createElement("div");o.style.cssText="font-size: 2rem;\n  color: #ffffff;";var a=function(e){e.preventDefault();var n=e.target;n.append(o);var r,a={},l=function(e,n){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return l=e.done,e},e:function(e){i=!0,c=e},f:function(){try{l||null==r.return||r.return()}finally{if(i)throw c}}}}(new FormData(n).entries());try{for(l.s();!(r=l.n()).done;){var u=r.value;a[u[0]]=u[1]}}catch(e){l.e(e)}finally{l.f()}c(a).then((function(e){if(200!==e.status)throw new Error("status network not 200");o.textContent="Спасибо! Мы скоро с вами свяжемся!",i(n),setTimeout((function(){o.remove(),"block"===document.querySelector(".popup").style.display&&(document.querySelector(".popup").style.display="none")}),5e3)})).catch((function(e){o.textContent="Что-то пошло не так...",console.error(e)}))},c=function(e){return o.textContent="",o.insertAdjacentHTML("afterBegin",'\n              <progress id="elem"></progress>\n              '),document.getElementById("elem").style.cssText="\n                  width: 5%;\n              ",requestAnimationFrame(l),fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},l=function e(){var t=performance.now()/1e3;t>1&&(t=1),t<1&&requestAnimationFrame(e)},i=function(e){e.querySelectorAll("input").forEach((function(e){e.value="",e.classList.remove("success")}))};e.addEventListener("submit",a),n.addEventListener("submit",a),r.addEventListener("submit",a)}()})();