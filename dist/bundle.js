(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var n,r,o,a,l,c,i,u,s,d,m,f,v,p,h,y,g,b,S,E,L,q;E=document.querySelector("#timer-hours"),L=document.querySelector("#timer-minutes"),q=document.querySelector("#timer-seconds"),function e(){var t,n,r,o=(t=(new Date("11 march 2021").getTime()-(new Date).getTime())/1e3,n=Math.floor(t%60),r=Math.floor(t/60)%60,{timeRemaining:t,hours:Math.floor(t/60/60)%24,minutes:r,seconds:n});E.textContent=o.hours<10?"0"+o.hours:o.hours,L.textContent=o.minutes<10?"0"+o.minutes:o.minutes,q.textContent=o.seconds<10?"0"+o.seconds:o.seconds,o.timeRemaining>0?setTimeout(e,1e3):o.timeRemaining<=0&&(E.textContent="00",L.textContent="00",q.textContent="00")}(),S=document.querySelector("menu"),window.addEventListener("click",(function(e){var t=e.target;S.classList.contains("active-menu")?(t.closest("a")||t.closest("main"))&&S.classList.toggle("active-menu"):S.classList.contains("active-menu")||t.closest(".menu")&&S.classList.toggle("active-menu")})),function(){var t=document.querySelector('a[href="#service-block"]'),n=document.querySelectorAll("menu > ul > li > a"),r=function(e){e.preventDefault();var n=e.target;n.closest("main")&&(n=t);var r=n.getAttribute("href"),o=window.pageYOffset,a=document.querySelector(r).getBoundingClientRect().top,l=null;requestAnimationFrame((function e(t){null===l&&(l=t);var n=t-l,c=a<0?Math.max(o-n/1,o+a):Math.min(o+n/1,o+a);window.scrollTo(0,c),c!==o+a?requestAnimationFrame(e):location.hash=r}))};t.addEventListener("click",r);var o,a=function(t,n){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,i=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){i=!0,l=e},f:function(){try{c||null==r.return||r.return()}finally{if(i)throw l}}}}(n);try{for(a.s();!(o=a.n()).done;)o.value.addEventListener("click",r)}catch(e){a.e(e)}finally{a.f()}}(),y=document.querySelector(".popup"),g=document.querySelectorAll(".popup-btn"),b=document.querySelector(".popup-content"),g.forEach((function(e){return e.addEventListener("click",(function(){if(y.style.display="block",document.documentElement.clientWidth>768)var e=Date.now(),t=setInterval((function(){var n=Date.now()-e;n>=1010?clearInterval(t):function(e){b.style.top=e/10+"px"}(n)}),20)}))})),y.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?y.style.display="none":(t=t.closest(".popup-content"))||(y.style.display="none")})),v=document.querySelector(".service-header"),p=v.querySelectorAll(".service-header-tab"),(h=document.querySelectorAll(".service-tab"))[1].classList.add("d-none"),h[2].classList.add("d-none"),v.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&p.forEach((function(e,n){e===t&&function(e){for(var t=0;t<p.length;t++)e===t?(p[t].classList.add("active"),h[t].classList.remove("d-none")):(h[t].classList.add("d-none"),p[t].classList.remove("active"))}(n)}))})),a=document.querySelectorAll(".portfolio-item"),l=document.querySelector(".portfolio-dots"),c=document.querySelector(".portfolio-content"),i=0,u=function(e,t,n){e[t].classList.remove(n)},s=function(e,t,n){e[t].classList.add(n)},d=function(e){var t=document.createElement("li");t.classList.add("dot"),t.classList.add("dot-active"),l.append(t);for(var n=1;n<e;n++)(t=document.createElement("li")).classList.add("dot"),l.append(t);return document.querySelectorAll(".dot")}(a.length),m=function(){u(a,i,"portfolio-item-active"),u(d,i,"dot-active"),++i>=a.length&&(i=0),s(a,i,"portfolio-item-active"),s(d,i,"dot-active")},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;o=setInterval(m,e)},c.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".portfolio-btn, .dot")&&(u(a,i,"portfolio-item-active"),u(d,i,"dot-active"),t.matches("#arrow-right")?i++:t.matches("#arrow-left")?i--:t.matches(".dot")&&d.forEach((function(e,n){e===t&&(i=n)})),i>=a.length&&(i=0),i<0&&(i=a.length-1),s(a,i,"portfolio-item-active"),s(d,i,"dot-active"))})),c.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),c.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&f(1500)})),f(1500),function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=document.querySelector(".calc-block"),r=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),a=document.querySelector(".calc-count"),l=document.querySelector(".calc-day"),c=document.getElementById("total"),i=function(e){var t=e.target;t.matches("input")&&(t.value=t.value.replace(/\D/,""))},u=function(){var e=r.options[r.selectedIndex].value,n=+o.value,c=1,i=1;return""===e||0===n||""!==o.textContent?0:(a.value>1&&(c+=(a.value-1)/10),l.value&&l.value<5?i*=2:l.value&&l.value<10&&(i*=1.5),e&&n?parseInt(t*e*n*c*i):void 0)},s=function(t,n){e=setInterval((function(){n===t?c.textContent=t:(n+=100,c.textContent=n)}),10)},d=function(){var e=u();s(e,0)},m=function(){clearInterval(e)};n.addEventListener("input",i),n.addEventListener("change",(function(e){var t=e.target;if(t.matches("select")||t.matches("input")){if(0===o.value||" "===o.textContent||""===r.value)return void(c.textContent=0);m(),d()}}))}(100),(r=document.querySelector(".command")).addEventListener("mouseover",(function(e){e.target.matches(".command__photo")&&(n=e.target.src,e.target.src=e.target.dataset.img)})),r.addEventListener("mouseout",(function(e){e.target.matches(".command__photo")&&(e.target.src=n)})),function(){var e=document.getElementById("form1"),t=document.getElementById("form2"),n=document.getElementById("form3"),r=document.querySelectorAll(".form-email");document.querySelectorAll(".form-btn"),r.forEach((function(e){e.setAttribute("required","required")}));var o,a=function(e){var t=e.target;t.matches('input[placeholder="Ваше имя"]')?t.value=t.value.replace(/[^А-Яа-я ]/g,""):t.matches('input[placeholder="Ваше сообщение"]')?t.value=t.value.replace(/[^А-Яа-я,\?!^0-9 ]/g,""):t.matches('input[placeholder="E-mail"]')||t.matches('input[placeholder="Ваш E-mail"]')?t.value=t.value.replace(/[^A-Za-z\-@_'`!\.\* ]/g,""):(t.matches('input[placeholder="Номер телефона"]')||t.matches('input[placeholder="Ваш номер телефона"]'))&&(t.value=t.value.replace(/[^0-9\+]/g,""))},l=function(e){var t=e.target,n=t.closest("form");t.value=t.value.replace(/ +/g," ").trim(),t.value=t.value.replace(/-+/g,"-"),t.value=t.value.replace(/^-*/g,""),t.value=t.value.replace(/-*$/g,""),t.matches('input[placeholder="Ваше имя"]')&&(t.value.length<2?(c(t),n.querySelector(".form-btn").setAttribute("disabled","disabled")):(i(t),n.querySelector(".form-btn").removeAttribute("disabled"),n.querySelector(".form-btn").style.display="inline-block",t.value=t.value[0].toUpperCase()+t.value.substr(1).toLowerCase())),(t.matches('input[placeholder="Номер телефона"]')||t.matches('input[placeholder="Ваш номер телефона"]'))&&("+"!==t.value[0]&&7===t.value.length||"+"!==t.value[0]&&11===t.value.length||"+"===t.value[0]&&12===t.value.length?(i(t),n.querySelector(".form-btn").removeAttribute("disabled"),n.querySelector(".form-btn").style.display="inline-block"):(c(t),n.querySelector(".form-btn").setAttribute("disabled","disabled"))),(t.matches('input[placeholder="E-mail"]')||t.matches('input[placeholder="Ваш E-mail"]'))&&(t.value.match(/\w+@\w+\.(\w){2,3}/gi)?(i(t),n.querySelector(".form-btn").removeAttribute("disabled"),n.querySelector(".form-btn").style.display="inline-block"):(c(t),n.querySelector(".form-btn").setAttribute("disabled","disabled"))),n.querySelectorAll("input").forEach((function(e){e.classList.contains("error")&&(n.querySelector(".form-btn").setAttribute("disabled","disabled"),n.querySelector(".form-btn").style.display="none")}))},c=function(e){if(e.classList.remove("success"),e.classList.add("error"),!e.nextElementSibling||!e.nextElementSibling.classList.contains("validator-error")){var t=document.createElement("div");e.matches('input[placeholder="Ваше имя"]')?t.textContent="Имя должно состоять минимум из 2 символов":e.matches('input[placeholder="Номер телефона"]')||e.matches('input[placeholder="Ваш номер телефона"]')?t.textContent="Это не номер телефона":(e.matches('input[placeholder="E-mail"]')||e.matches('input[placeholder="Ваш E-mail"]'))&&(t.textContent="Неверный формат Email"),t.classList.add("validator-error"),e.insertAdjacentElement("afterend",t)}},i=function(e){e.classList.remove("error"),e.classList.add("success"),e.nextElementSibling&&e.nextElementSibling.classList.contains("validator-error")&&e.nextElementSibling.remove()};(o=document.createElement("style")).textContent="\n        input.success {\n          border: 2px solid green !important;\n        }\n        input.error {\n          border: 2px solid red  !important;\n        }\n\n        .validator-error {\n          font-size: 12px;\n          font-family: sans-serif;\n          color: red;\n        }\n        ",document.head.appendChild(o),e.addEventListener("input",a),e.addEventListener("focusout",l),t.addEventListener("input",a),t.addEventListener("focusout",l),n.addEventListener("input",a),n.addEventListener("focusout",l)}(),function(){var e=document.getElementById("form1"),n=document.getElementById("form2"),r=document.getElementById("form3"),o=document.createElement("div");o.style.cssText="font-size: 2rem;\n  color: #ffffff;";var a=function(e){e.preventDefault();var n=e.target;n.append(o);var r,a={},c=function(e,n){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){i=!0,l=e},f:function(){try{c||null==r.return||r.return()}finally{if(i)throw l}}}}(new FormData(n).entries());try{for(c.s();!(r=c.n()).done;){var u=r.value;a[u[0]]=u[1]}}catch(e){c.e(e)}finally{c.f()}l(a).then((function(e){if(200!==e.status)throw new Error("status network not 200");o.textContent="Спасибо! Мы скоро с вами свяжемся!",i(n),setTimeout((function(){o.remove(),"block"===document.querySelector(".popup").style.display&&(document.querySelector(".popup").style.display="none")}),5e3)})).catch((function(e){o.textContent="Что-то пошло не так...",console.error(e)}))},l=function(e){return o.textContent="",o.insertAdjacentHTML("afterBegin",'\n              <progress id="elem"></progress>\n              '),document.getElementById("elem").style.cssText="\n                  width: 5%;\n              ",requestAnimationFrame(c),fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},c=function e(){var t=performance.now()/1e3;t>1&&(t=1),t<1&&requestAnimationFrame(e)},i=function(e){e.querySelectorAll("input").forEach((function(e){e.value="",e.classList.remove("success")}))};e.addEventListener("submit",a),n.addEventListener("submit",a),r.addEventListener("submit",a)}()})();